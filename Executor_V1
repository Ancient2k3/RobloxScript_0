-- Function to set up the GUI
local function setupGui()
    -- Check if the GUI already exists
    local existingGui = game.Players.LocalPlayer:WaitForChild("PlayerGui"):FindFirstChild("ScriptGui")
    if existingGui then
        existingGui:Destroy() -- Remove the old GUI if it exists
    end

    -- Create the main ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "ScriptGui"
    screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    -- Create the log TextBox
    local logTextBox = Instance.new("TextBox")
    logTextBox.Name = "LogTextBox"
    logTextBox.Parent = screenGui
    logTextBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255) -- White background
    logTextBox.BackgroundTransparency = 0.5 -- Semi-transparent
    logTextBox.BorderColor3 = Color3.fromRGB(0, 0, 255) -- Blue border
    logTextBox.BorderSizePixel = 2
    logTextBox.Position = UDim2.new(0.3, 0, 0.1, 0) -- Position above the original TextBox
    logTextBox.Size = UDim2.new(0.4, 0, 0.3, 0) -- Larger size to fit multiple lines
    logTextBox.Text = "-- Console Logs Shown Here --" -- Placeholder text
    logTextBox.TextColor3 = Color3.fromRGB(255, 0, 0) -- Black text
    logTextBox.Font = Enum.Font.PatrickHand -- Font style
    logTextBox.TextSize = 18 -- Font size
    logTextBox.TextScaled = true -- Scale text to fit the TextBox
    logTextBox.ClearTextOnFocus = false -- Keep text when focused
    logTextBox.TextWrapped = true -- Wrap text to fit within the TextBox
    logTextBox.MultiLine = true -- Allows multiple lines
    logTextBox.TextStrokeTransparency = 0.8 -- Add some contrast for readability

    -- Add rounded corners to the Log TextBox
    local uiCornerLog = Instance.new("UICorner")
    uiCornerLog.CornerRadius = UDim.new(0.2, 0) -- Rounded corners
    uiCornerLog.Parent = logTextBox

    -- Create the original TextBox
    local textBox = Instance.new("TextBox")
    textBox.Name = "ScriptTextBox"
    textBox.Parent = screenGui
    textBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255) -- White background
    textBox.BackgroundTransparency = 0.5 -- Semi-transparent
    textBox.BorderColor3 = Color3.fromRGB(0, 0, 255) -- Blue border
    textBox.BorderSizePixel = 2
    textBox.Position = UDim2.new(0.3, 0, 0.45, 0) -- Position below the log TextBox
    textBox.Size = UDim2.new(0.4, 0, 0.1, 0) -- Width and height
    textBox.Text = " " -- Placeholder text
    textBox.TextColor3 = Color3.fromRGB(0, 0, 255) -- Black text
    textBox.Font = Enum.Font.PatrickHand -- Font style
    textBox.TextSize = 18 -- Font size
    textBox.TextScaled = true -- Scale text to fit the TextBox
    textBox.ClearTextOnFocus = false -- Keep text when focused

    -- Add rounded corners to the TextBox
    local uiCornerTextBox = Instance.new("UICorner")
    uiCornerTextBox.CornerRadius = UDim.new(0.2, 0) -- Rounded corners
    uiCornerTextBox.Parent = textBox

    -- Create the Execute Button
    local executeButton = Instance.new("TextButton")
    executeButton.Name = "ExecuteButton"
    executeButton.Parent = screenGui
    executeButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- Green background
    executeButton.BackgroundTransparency = 0.8
    executeButton.BorderColor3 = Color3.fromRGB(0, 0, 0) -- Black border
    executeButton.BorderSizePixel = 2
    executeButton.Position = UDim2.new(0.3, 0, 0.55, 0) -- Positioned below the original TextBox
    executeButton.Size = UDim2.new(0.4, 0, 0.1, 0) -- Width and height
    executeButton.Text = "Activated Script" -- Button text
    executeButton.TextColor3 = Color3.fromRGB(0, 255, 0) -- Black text
    executeButton.Font = Enum.Font.PatrickHand -- Font style
    executeButton.TextSize = 18 -- Font size
    executeButton.TextScaled = true -- Scale text to fit the button

    -- Add rounded corners to the Execute Button
    local uiCornerButton = Instance.new("UICorner")
    uiCornerButton.CornerRadius = UDim.new(0.2, 0) -- Rounded corners
    uiCornerButton.Parent = executeButton

    -- Create the Toggle Button
    local toggleButton = Instance.new("TextButton")
    toggleButton.Name = "ToggleButton"
    toggleButton.Parent = screenGui
    toggleButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255) -- White background
    toggleButton.BackgroundTransparency = 0.5 -- Semi-transparent
    toggleButton.BorderColor3 = Color3.fromRGB(0, 0, 255) -- Blue border
    toggleButton.BorderSizePixel = 2
    toggleButton.Position = UDim2.new(0.7, 0, -0.1, 0) -- Positioned at the top right
    toggleButton.Size = UDim2.new(0.2, 0, 0.1, 0) -- Width and height
    toggleButton.Text = "Close" -- Initial text
    toggleButton.TextColor3 = Color3.fromRGB(0, 0, 0) -- Black text
    toggleButton.Font = Enum.Font.PatrickHand -- Font style
    toggleButton.TextSize = 18 -- Font size
    toggleButton.TextScaled = true -- Scale text to fit the button

    -- Add rounded corners to the Toggle Button
    local uiCornerToggle = Instance.new("UICorner")
    uiCornerToggle.CornerRadius = UDim.new(0.2, 0) -- Rounded corners
    uiCornerToggle.Parent = toggleButton

    -- Create Script Buttons
    local script1Button = Instance.new("TextButton")
    script1Button.Name = "Script1Button"
    script1Button.Parent = screenGui
    script1Button.BackgroundColor3 = Color3.fromRGB(200, 200, 200) -- Gray background
    script1Button.BackgroundTransparency = 0.5
    script1Button.BorderColor3 = Color3.fromRGB(0, 0, 255) -- Blue border
    script1Button.BorderSizePixel = 2
    script1Button.Size = UDim2.new(0.05, 0, 0.05, 0) -- Width and height
    script1Button.Text = "My Script: Blox Fruits" -- Button text
    script1Button.TextColor3 = Color3.fromRGB(0, 0, 0) -- Black text
    script1Button.Font = Enum.Font.PatrickHand -- Font style
    script1Button.TextSize = 18 -- Font size
    script1Button.TextScaled = true -- Scale text to fit the button
    script1Button.Position = UDim2.new(0.3, 0, 0.7, 0) -- Position below the Toggle Button

    -- Add rounded corners to Script1 Button
    local uiCornerScript1 = Instance.new("UICorner")
    uiCornerScript1.CornerRadius = UDim.new(0.2, 0) -- Rounded corners
    uiCornerScript1.Parent = script1Button

    -- Connect Script1 button click event
    script1Button.MouseButton1Click:Connect(function()
        textBox.Text = "loadstring(game:HttpGet('https://raw.githubusercontent.com/NganHa2k3/RobloxScript/main/BloxFruits_V4'))()"
    end)

    local script2Button = Instance.new("TextButton")
    script2Button.Name = "Script2Button"
    script2Button.Parent = screenGui
    script2Button.BackgroundColor3 = Color3.fromRGB(200, 200, 200) -- Gray background
    script2Button.BackgroundTransparency = 0.5
    script2Button.BorderColor3 = Color3.fromRGB(0, 0, 255) -- Blue border
    script2Button.BorderSizePixel = 2
    script2Button.Size = UDim2.new(0.05, 0, 0.05, 0) -- Width and height
    script2Button.Text = "My Script: Float" -- Button text
    script2Button.TextColor3 = Color3.fromRGB(0, 0, 0) -- Black text
    script2Button.Font = Enum.Font.PatrickHand -- Font style
    script2Button.TextSize = 18 -- Font size
    script2Button.TextScaled = true -- Scale text to fit the button
    script2Button.Position = UDim2.new(0.3, 0, 0.8, 0) -- Position below Script1 Button

    -- Add rounded corners to Script2 Button
    local uiCornerScript2 = Instance.new("UICorner")
    uiCornerScript2.CornerRadius = UDim.new(0.2, 0) -- Rounded corners
    uiCornerScript2.Parent = script2Button

    -- Connect Script2 button click event
    script2Button.MouseButton1Click:Connect(function()
        textBox.Text = "loadstring(game:HttpGet('https://raw.githubusercontent.com/NganHa2k3/RobloxScript/main2/Float_V0'))()"
    end)

local script3Button = Instance.new("TextButton")
    script3Button.Name = "Script1Button"
    script3Button.Parent = screenGui
    script3Button.BackgroundColor3 = Color3.fromRGB(200, 200, 200) -- Gray background
    script3Button.BackgroundTransparency = 0.5
    script3Button.BorderColor3 = Color3.fromRGB(0, 0, 255) -- Blue border
    script3Button.BorderSizePixel = 2
    script3Button.Size = UDim2.new(0.05, 0, 0.05, 0) -- Width and height
    script3Button.Text = "My Script: BoomBox" -- Button text
    script3Button.TextColor3 = Color3.fromRGB(0, 0, 0) -- Black text
    script3Button.Font = Enum.Font.PatrickHand -- Font style
    script3Button.TextSize = 18 -- Font size
    script3Button.TextScaled = true -- Scale text to fit the button
    script3Button.Position = UDim2.new(0.4, 0, 0.7, 0) -- Position below the Toggle Button

    -- Add rounded corners to Script3 Button
    local uiCornerScript3 = Instance.new("UICorner")
    uiCornerScript3.CornerRadius = UDim.new(0.2, 0) -- Rounded corners
    uiCornerScript3.Parent = script3Button

    -- Connect Script3 button click event
    script3Button.MouseButton1Click:Connect(function()
        textBox.Text = "loadstring(game:HttpGet('https://raw.githubusercontent.com/NganHa2k3/RobloxScript/item/SoundID_V0'))()"
    end)

local script4Button = Instance.new("TextButton")
    script4Button.Name = "Script1Button"
    script4Button.Parent = screenGui
    script4Button.BackgroundColor3 = Color3.fromRGB(200, 200, 200) -- Gray background
    script4Button.BackgroundTransparency = 0.5
    script4Button.BorderColor3 = Color3.fromRGB(0, 0, 255) -- Blue border
    script4Button.BorderSizePixel = 2
    script4Button.Size = UDim2.new(0.05, 0, 0.05, 0) -- Width and height
    script4Button.Text = "My Script: Murder Mystery 2" -- Button text
    script4Button.TextColor3 = Color3.fromRGB(0, 0, 0) -- Black text
    script4Button.Font = Enum.Font.PatrickHand -- Font style
    script4Button.TextSize = 18 -- Font size
    script4Button.TextScaled = true -- Scale text to fit the button
    script4Button.Position = UDim2.new(0.4, 0, 0.8, 0) -- Position below the Toggle Button

    -- Add rounded corners to Script4 Button
    local uiCornerScript4 = Instance.new("UICorner")
    uiCornerScript4.CornerRadius = UDim.new(0.2, 0) -- Rounded corners
    uiCornerScript4.Parent = script4Button

    -- Connect Script4 button click event
    script4Button.MouseButton1Click:Connect(function()
        textBox.Text = "loadstring(game:HttpGet('https://raw.githubusercontent.com/NganHa2k3/RobloxScript/main2/MurderMystery2_V0'))()"
    end)

    -- Initial visibility state
    local isVisible = true
    textBox.Visible = isVisible
    executeButton.Visible = isVisible
    logTextBox.Visible = isVisible
    script1Button.Visible = isVisible
    script2Button.Visible = isVisible
    script3Button.Visible = isVisible
    script4Button.Visible = isVisible

    -- Function to toggle visibility of the GUI elements
    local function toggleVisibility()
        isVisible = not isVisible
        textBox.Visible = isVisible
        executeButton.Visible = isVisible
        logTextBox.Visible = isVisible
        script1Button.Visible = isVisible
        script2Button.Visible = isVisible
        script3Button.Visible = isVisible
        script4Button.Visible = isVisible
        toggleButton.Text = isVisible and "Close" or "Open" -- Update text based on visibility
    end

    -- Connect the toggle button to the function
    toggleButton.MouseButton1Click:Connect(toggleVisibility)

    -- Function to execute the script from the TextBox input and update the log TextBox
    local function executeScript()
        local scriptCode = textBox.Text
        local output = {}

        -- Redirect print statements
        local oldPrint = print
        local function newPrint(...)
            table.insert(output, table.concat({...}, " "))
            oldPrint(...)
        end
        print = newPrint

        -- Execute the script code
        local success, result = pcall(function()
            loadstring(scriptCode)()
        end)

        -- Restore the original print function
        print = oldPrint

        -- Update log TextBox
        if success then
            logTextBox.Text = table.concat(output, "\n")
        else
            logTextBox.Text = "Error: " .. result
        end
    end

    -- Connect the execute button to the executeScript function
    executeButton.MouseButton1Click:Connect(executeScript)
end

-- Call the function to set up the GUI
setupGui()
