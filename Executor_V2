-- Custom Executor: v2.5 --
local ws, plrs, core
ws = game:GetService("Workspace")
plrs = game:GetService("Players")
core = game:GetService("CoreGui")

local ui_data, funcs = {
  folder = nil,
  name = "CodesEditor_xScripts",
  vars = {
    delay = 0.001,
    show = false,
    looped = false,
    loaded_text = false,
    show_api = 0
  },
  api_funcs = game:HttpGet("https://raw.githubusercontent.com/Ancient2k3/RobloxScript_0/refs/heads/main/Custom_API/Scripts.lua")
}, {
  corner = function(t, r) Instance.new("UICorner", t).CornerRadius = UDim.new(r, 0) end
}

if core:FindFirstChild(ui_data.name) then
  core[ui_data.name]:FindFirstChildOfClass("ScreenGui"):Destroy()
else
  ui_data.folder = Instance.new("Folder", core)
  ui_data.folder.Name = ui_data.name
end

repeat task.wait()
until type(ui_data.api_funcs) == "string" and ui_data.api_funcs ~= ""

local screenui, debug_console, code_box, exec_one, exec_loop, tshow_ui, _wait
screenui = Instance.new("ScreenGui", core[ui_data.name])
screenui.Name = "ExecuteTools"

debug_console = Instance.new("TextBox", screenui)
debug_console.Name = "Codes-Output"
debug_console.BackgroundTransparency = 0.5
debug_console.BackgroundColor3 = Color3.new(0, 0, 0)
debug_console.Position = UDim2.new(0.3, 0, 0.145, 0)
debug_console.Size = UDim2.new(0.4, 0, 0.1, 0)
debug_console.TextScaled = true
debug_console.TextSize = 12
debug_console.TextColor3 = Color3.new(1, 1, 1)
debug_console.TextWrapped = true
debug_console.MultiLine = true
debug_console.Font = Enum.Font.Code
debug_console.Text = ""
debug_console.PlaceholderText = "< result >"
debug_console.ClearTextOnFocus = false
debug_console.Visible = false
funcs.corner(debug_console, 0.1)

code_box = Instance.new("TextBox", screenui)
code_box.Name = "CodingHere"
code_box.BackgroundTransparency = 0.5
code_box.BackgroundColor3 = Color3.new(0, 0, 0)
code_box.Position = UDim2.new(0.3, 0, 0.25, 0)
code_box.Size = UDim2.new(0.4, 0, 0.4, 0)
code_box.TextScaled = false
code_box.TextSize = 12
code_box.TextColor3 = Color3.new(1, 1, 1)
code_box.Font = Enum.Font.Code
code_box.MultiLine = true
code_box.Text = ""
code_box.ClearTextOnFocus = false
code_box.PlaceholderText = "..."
code_box.ClipsDescendants = true
code_box.TextXAlignment = "Left"
code_box.TextYAlignment = "Top"
code_box.Visible = false
funcs.corner(code_box, 0.025)

exec_one = Instance.new("TextButton", screenui)
exec_one.Name = "R1Times"
exec_one.BackgroundTransparency = 0.5
exec_one.BackgroundColor3 = Color3.new(0, 0, 0)
exec_one.Position = UDim2.new(0.3, 0, 0.655, 0)
exec_one.Size = UDim2.new(0.15, 0, 0.06, 0)
exec_one.TextScaled = true
exec_one.TextSize = 12
exec_one.TextColor3 = Color3.new(1, 1, 1)
exec_one.Font = Enum.Font.Code
exec_one.Text = "Execute"
exec_one.Visible = false
funcs.corner(exec_one, 0.095)

exec_loop = Instance.new("TextButton", screenui)
exec_loop.Name = "R2Times"
exec_loop.BackgroundTransparency = 0.5
exec_loop.BackgroundColor3 = Color3.new(0, 0, 0)
exec_loop.Position = UDim2.new(0.452, 0, 0.655, 0)
exec_loop.Size = UDim2.new(0.15, 0, 0.06, 0)
exec_loop.TextScaled = true
exec_loop.TextSize = 12
exec_loop.TextColor3 = Color3.new(1, 1, 1)
exec_loop.Font = Enum.Font.Code
exec_loop.Text = "Loop Execute"
exec_loop.Visible = false
funcs.corner(exec_loop, 0.095)

_wait = Instance.new("TextBox", screenui)
_wait.Name = "Set_Delay"
_wait.BackgroundTransparency = 0.5
_wait.BackgroundColor3 = Color3.new(0, 0, 0)
_wait.Position = UDim2.new(0.65, 0, 0.655, 0)
_wait.Size = UDim2.new(0.05, 0, 0.06, 0)
_wait.TextScaled = true
_wait.TextSize = 12
_wait.TextColor3 = Color3.new(1, 1, 1)
_wait.Font = Enum.Font.Code
_wait.Text = ""
_wait.ClearTextOnFocus = true
_wait.PlaceholderText = "int"
_wait.Visible = false
funcs.corner(_wait, 0.095)

tshow_ui = Instance.new("TextButton", screenui)
tshow_ui.Name = "Executor-Enable"
tshow_ui.BackgroundTransparency = 0.5
tshow_ui.BackgroundColor3 = Color3.new(0, 0, 0)
tshow_ui.Position = UDim2.new(0.94, 0, 0, 0)
tshow_ui.Size = UDim2.new(0.05, 0, 0.1, 0)
tshow_ui.TextScaled = true
tshow_ui.TextSize = 12
tshow_ui.TextColor3 = Color3.new(1, 1, 1)
tshow_ui.Font = Enum.Font.Code
tshow_ui.Text = "XScript"
tshow_ui.Visible = true
funcs.corner(tshow_ui, 0.15)

function fill_text_effect(str)
  if not ui_data.vars.loaded_text then
    ui_data.vars.loaded_text = true
    local rslt = code_box.PlaceholderText or "" .. " "
    for idx = 1, #str do
      rslt = rslt .. str:sub(idx, idx)
      code_box.PlaceholderText = rslt
      task.wait(0.2)
    end
  end
end

function ui_visible(state)
  local x = state or false
  debug_console.Visible = x
  code_box.Visible = x
  exec_one.Visible = x
  exec_loop.Visible = x
  _wait.Visible = x
end

function run_script()
  local codes, output, o_print, result
  codes = code_box.Text
  output = {}
  o_print = print
  result = ""
  local n_print = function(...)
    table.insert(output, table.concat({...}, " "))
    o_print(...)
  end print = n_print
  local ss, err = pcall(function()
    loadstring(ui_data.api_funcs .. "\n" .. codes)()
  end) print = o_print
  if ss then result = result .. table.concat(output, "\n")
  else result = result .. err
  end debug_console.Text = tostring(result)
end

tshow_ui.MouseButton1Click:Connect(function()
  if not ui_data.vars.show then
    ui_data.vars.show = true
    tshow_ui.TextColor3 = Color3.new(0, 1, 0)
  else ui_data.vars.show = false
    tshow_ui.TextColor3 = Color3.new(1, 1, 1)
  end ui_visible(ui_data.vars.show) if ui_data.vars.show_api < 5 then
    ui_data.vars.show_api = ui_data.vars.show_api + 1
    if ui_data.vars.show_api >= 2 and ui_data.vars.show_api < 4 then
      fill_text_effect("use built_in_funcs() to get a list of it.")
    else code_box.PlaceholderText = "..."
    end
  end
end)

exec_one.MouseButton1Click:Connect(run_script)

exec_loop.MouseButton1Click:Connect(function()
  if not ui_data.vars.looped then
    ui_data.vars.looped = true
    exec_loop.TextColor3 = Color3.new(0, 1, 0)
  else ui_data.vars.looped = false
    exec_loop.TextColor3 = Color3.new(1, 1, 1)
  end while ui_data.vars.looped do wait(ui_data.vars.delay)
    run_script()
  end
end)

_wait.FocusLost:Connect(function(ep)
    if ep and _wait.Text ~= "" then
      if _wait.Text == "clear" then
        code_box.Text = ""
      end if not _wait.Text:match("%d+") then return end
      ui_data.vars.delay = tonumber(_wait.Text) or 0.001
      _wait.Text = ""
    end
end)
