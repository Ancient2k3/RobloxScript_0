-- Version2: Re-Write --
local ExGui = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui"):FindFirstChild("ExecuteTools")
if ExGui then
    ExGui:Destroy()
end

local ExScreenGui, DebugConsole, ScriptBox, PressExecute, LoopExecute, Shown_Hidden_UI, LoopDelay
local default_delay = 0.1
local NtG = game:GetService("StarterGui")

function AddUICorner(PT)
    local CompletedUI = Instance.new("UICorner")
    CompletedUI.Parent = PT
    CompletedUI.CornerRadius = UDim.new(0.2, 0)
end

function ntf(msg)
    NtG:SetCore("SendNotification", {
        Title = "NganHa2k3 Script",
        Text = msg,
        Duration = 2.5,
    })
end

ExScreenGui = Instance.new("ScreenGui")
ExScreenGui.Name = "ExecuteTools"
ExScreenGui.Parent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")

DebugConsole = Instance.new("TextBox")
DebugConsole.Name = "LP_Console"
DebugConsole.Parent = ExScreenGui
DebugConsole.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
DebugConsole.BackgroundTransparency = 0.5
DebugConsole.Position = UDim2.new(0.3, 0, 0.345, 0)
DebugConsole.Size = UDim2.new(0.4, 0, 0.1, 0)
DebugConsole.TextScaled = true
DebugConsole.TextColor3 = Color3.fromRGB(255, 255, 0)
DebugConsole.Font = Enum.Font.Code
DebugConsole.TextSize = 18
DebugConsole.Text = ""
DebugConsole.PlaceholderText = "Output:"
DebugConsole.TextWrapped = true
DebugConsole.MultiLine = true
DebugConsole.TextStrokeTransparency = 0.8
DebugConsole.ClearTextOnFocus = false
DebugConsole.Visible = false

ScriptBox = Instance.new("TextBox")
ScriptBox.Name = "ExScript"
ScriptBox.Parent = ExScreenGui
ScriptBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ScriptBox.BackgroundTransparency = 0.5
ScriptBox.Position = UDim2.new(0.3, 0, 0.45, 0)
ScriptBox.Size = UDim2.new(0.4, 0, 0.1, 0)
ScriptBox.TextScaled = true
ScriptBox.TextColor3 = Color3.fromRGB(255, 255, 255)
ScriptBox.Font = Enum.Font.Code
ScriptBox.TextSize = 18
ScriptBox.MultiLine = true
ScriptBox.Text = ""
ScriptBox.ClearTextOnFocus = false
ScriptBox.PlaceholderText = "example: print('hello world')"
ScriptBox.Visible = false

PressExecute = Instance.new("TextButton")
PressExecute.Name = "Normal_RunScript"
PressExecute.Parent = ExScreenGui
PressExecute.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
PressExecute.BackgroundTransparency = 0.5
PressExecute.Position = UDim2.new(0.3, 0, 0.555, 0)
PressExecute.Size = UDim2.new(0.15, 0, 0.06, 0)
PressExecute.TextScaled = true
PressExecute.TextColor3 = Color3.fromRGB(0, 255, 0)
PressExecute.Font = Enum.Font.Code
PressExecute.Text = "Execute"
PressExecute.TextSize = 18
PressExecute.Visible = false

LoopExecute = Instance.new("TextButton")
LoopExecute.Name = "Loop_RunScript"
LoopExecute.Parent = ExScreenGui
LoopExecute.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
LoopExecute.BackgroundTransparency = 0.5
LoopExecute.Position = UDim2.new(0.452, 0, 0.555, 0)
LoopExecute.Size = UDim2.new(0.15, 0, 0.06, 0)
LoopExecute.TextScaled = true
LoopExecute.TextColor3 = Color3.fromRGB(0, 255, 0)
LoopExecute.Font = Enum.Font.Code
LoopExecute.Text = "Loop Execute"
LoopExecute.TextSize = 18
LoopExecute.Visible = false

LoopDelay = Instance.new("TextBox")
LoopDelay.Name = "Set_Execute_Delay"
LoopDelay.Parent = ExScreenGui
LoopDelay.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
LoopDelay.BackgroundTransparency = 0.5
LoopDelay.Position = UDim2.new(0.65, 0, 0.555, 0)
LoopDelay.Size = UDim2.new(0.05, 0, 0.06, 0)
LoopDelay.TextScaled = true
LoopDelay.TextColor3 = Color3.fromRGB(0, 255, 255)
LoopDelay.TextSize = 18
LoopDelay.Font = Enum.Font.Code
LoopDelay.Text = ""
LoopDelay.ClearTextOnFocus = true
LoopDelay.PlaceholderText = "Default 0.1"
LoopDelay.Visible = false

Shown_Hidden_UI = Instance.new("TextButton")
Shown_Hidden_UI.Name = "ImGirl"
Shown_Hidden_UI.Parent = ExScreenGui
Shown_Hidden_UI.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Shown_Hidden_UI.BackgroundTransparency = 0.5
Shown_Hidden_UI.Position = UDim2.new(0.94, 0, 0, 0)
Shown_Hidden_UI.Size = UDim2.new(0.05, 0, 0.1, 0)
Shown_Hidden_UI.TextScaled = true
Shown_Hidden_UI.TextColor3 = Color3.fromRGB(255, 255, 255)
Shown_Hidden_UI.Font = Enum.Font.Code
Shown_Hidden_UI.TextSize = 18
Shown_Hidden_UI.Text = "Shown"
Shown_Hidden_UI.Visible = true

AddUICorner(DebugConsole)
AddUICorner(ScriptBox)
AddUICorner(PressExecute)
AddUICorner(LoopExecute)
AddUICorner(LoopDelay)
AddUICorner(Shown_Hidden_UI)

function ShowUI()
    DebugConsole.Visible = true
    ScriptBox.Visible = true
    PressExecute.Visible = true
    LoopExecute.Visible = true
    LoopDelay.Visible = true
end

function HideUI()
    DebugConsole.Visible = false
    ScriptBox.Visible = false
    PressExecute.Visible = false
    LoopExecute.Visible = false
    LoopDelay.Visible = false
end

function ExecuteScript()
    local Code = ScriptBox.Text
    local output = {}
    local Old_Print = print
    local function NewPrint(...)
        table.insert(output, table.concat({...}, " "))
        Old_Print(...)
    end
    print = NewPrint
    
    local success, result = pcall(function()
        loadstring(Code)()
    end)
    
    print = Old_Print
    
    if success then
        DebugConsole.Text = table.concat(output, "\n")
    else
        DebugConsole.Text = "Error: " .. result
    end
end

local Show = false
local IsActivated = false

Shown_Hidden_UI.MouseButton1Click:Connect(function()
    if Show then
        Shown_Hidden_UI.Text = "Shown"
        HideUI()
        Show = false
    else
        Shown_Hidden_UI.Text = "Hide"
        ShowUI()
        Show = true
    end
end)

PressExecute.MouseButton1Click:Connect(ExecuteScript)

LoopDelay.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        local new_delay = LoopDelay.Text
        LoopDelay.Text = ""

        if new_delay == "clear" or new_delay == "Clear" then
            ScriptBox.Text = ""
            DebugConsole.Text = ""
        elseif new_delay == "destroy" or new_delay == "Destroy" then
            IsActivated = false
            local ExGui = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui"):FindFirstChild("ExecuteTools")
            if ExGui then
                ExGui:Destroy()
            end
        else
            local delayValue = tonumber(new_delay)
            if delayValue then
                if delayValue < 0.01 then
                    default_delay = 0.1
                else
                    default_delay = delayValue
                end
            end
        end
    end
end)

LoopExecute.MouseButton1Click:Connect(function()
    if IsActivated then
        LoopExecute.Text = "Loop Execute"
        LoopExecute.TextColor3 = Color3.fromRGB(0, 255, 0)
        IsActivated = false
    else
        LoopExecute.Text = "Is Running"
        LoopExecute.TextColor3 = Color3.fromRGB(255, 0, 0)
        IsActivated = true
        
        while IsActivated do
            wait(default_delay)
            ExecuteScript()
        end
    end
end)

ntf("Custom Script Executor!")
